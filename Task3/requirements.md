# Требования к безопасности
Для интеграции с системами "Интеллектуальный домофон" и "Интеллектуальный шлагбаум" нужно минимизировать количество данных о пользователях, которые будут передаваться по во внешние сервисы (партнерам). Данные в их исходном виде лучше вообще не передавать - только зашифрованные производные (хэши, токены). Для взаимодействия на стороне PropDevelopment будем использовать дополнительный сервис smart-home, который в свою очередь будет общаться с внешними API и хранить информацию об операциях.

## Интеллектуальный домофон
Обладает функциями видеодомофона и распознает лица - по лицу определяет, открыть ли дверь. 
То есть для работы этого сервиса нужны биометрические данные - скан лица / фото. Их должен предоставить PropDevelopment.
По таким данным можно реализовать хэш-функцию или другой механизм сопоставления распознанных лиц с известными. 
Так как обработкой изображения занимается внешний партнер, нужны дополнительные меры безопасности.
От пользователя должно быть согласие на передачу биометрических данных партнеру с указанием цели и срока хранения.
С партнером должен быть заключен договор:
- ограничиние распространения данных дальше (субподряд)
- политики хранения и использования данных
- политики передачи данных (какие методы безопасности применять, шифрование и тд)
- журналирование операций и их хранение (для проверки действий на стороне партнера)

## Интеллектуальный шлагбаум
Работает аналогично домофону, только распознает номер машины и открывает шлагбаум. 
Тут можно опустить логику предоставления данных партнеру - номер машины считывается с номерного знака.
Достаточно от партнера к PropDevelopment выполнить запрос с зашифрованным номером авто и идентификатором шлагбаума - этих данных хватит для принятия решения, открыть шлагбаум или нет.

## Протоколы безопасности
Все запросы между сервисами должны быть зашифрованы (используем HTTPS, с подтвержденными сертификатами);
Данные в БД должны быть зашифрованы; 
Помимо шифрования траффика стоит применить дополнительное кодирование; 
Для передачи ключей шифрования нужно использовать альтернативный канал связи - сторонний сервис, физический носитель и тп;
Для авторизации использовать OAuth2 для предоставления доступа к API;
JWT - для аутентификации пользователей; 
IP whitelist - smart-home должен обрабатывать запросы только от партнера;
Аудит действий - обе стороны должны хранить журнал действий и желательно - иметь инструмент для быстрого сравнения журналов;
DDoS защита - smart-home должен быть защищен с помощью DDoS Protection сервиса. 